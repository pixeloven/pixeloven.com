---
import { getCollection, render } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import ThemeToggle from '../../components/ThemeToggle.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { id: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);

const formattedDate = post.data.date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={`${post.data.title} | PixelOven`} description={post.data.summary}>
  <ThemeToggle />

  <div class="max-w-4xl mx-auto px-6 py-20 lg:py-32">
    <article>
      <header class="mb-12">
        <a href="/blog/" class="text-xs uppercase tracking-[0.3em] text-oven font-bold mb-6 block hover:underline">&larr; Back to blog</a>
        <h1 class="text-4xl md:text-5xl font-black uppercase italic tracking-tighter mb-4">{post.data.title}</h1>
        <time class="text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em]">{formattedDate}</time>
      </header>

      <div class="prose prose-zinc dark:prose-invert prose-lg max-w-none prose-headings:font-black prose-headings:uppercase prose-headings:italic prose-headings:tracking-tighter prose-a:text-oven prose-a:no-underline hover:prose-a:underline">
        <Content />
      </div>
    </article>

    <div class="mt-24">
      <Footer />
    </div>
  </div>
</BaseLayout>
